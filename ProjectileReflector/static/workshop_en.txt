[h1]Projectile Reflector 刀反子弹 v1.4[/h1]

[url=https://github.com/YukkuriC/YetAnotherDuckovMod/tree/main/ProjectileReflector] Github Source Code [/url]

Melee weapons can reflect bullets within a 180° sector in front. There are two reflection modes: Active and Passive.  
Active reflection triggers shortly after the player performs a melee attack, reflecting bullets without consuming stamina, (by default) featuring a larger reflection area and increased reflected bullet power;  
Passive reflection triggers when the player is hit while holding the weapon and has sufficient stamina, consuming stamina to deflect bullets, with a lower probability of reflecting bullets back towards the attacker.

[h2]Configuration[/h2]

The configuration file is located at [u]<SaveDirectory>/YukkuriC.ProjectileReflector.json[/u] (typically [u]C:\Users\<Username>\AppData\LocalLow\TeamSoda\Duckov\Saves\YukkuriC.ProjectileReflector.json[/u] for Windows OS); if installed with [url=https://steamcommunity.com/sharedfiles/filedetails/?id=3590674339]ModConfig[/url] or [url=https://steamcommunity.com/sharedfiles/filedetails/?id=3595729494]ModSetting[/url] then the config can also be edited in game.  
All config entries are listed as follows:

[h3]Group: Version 1.4[/h3]
[table]
    [tr]
        [th]Configuration Name[/th]
        [th]Type[/th]
        [th]Default Value[/th]
        [th]Description[/th]
    [/tr]
[tr][td]ModVersion_1_4[/td][td]bool[/td][td]true[/td][td](Display only) Mod version: 1.4[/td][/tr]
[/table]
[h3]Group: Functions[/h3]
[table]
    [tr]
        [th]Configuration Name[/th]
        [th]Type[/th]
        [th]Default Value[/th]
        [th]Description[/th]
    [/tr]
[tr][td]ENABLE_ACTIVE_REFLECT[/td][td]bool[/td][td]true[/td][td]Enables active reflection[/td][/tr]
[tr][td]ENABLE_PASSIVE_REFLECT[/td][td]bool[/td][td]true[/td][td]Enables passive reflection[/td][/tr]
[tr][td]PASSIVE_REFLECT_BY_ADS[/td][td]bool[/td][td]false[/td][td]Enables passive reflection only during ADS mode[/td][/tr]
[tr][td]PASSIVE_REFLECT_WHEN_RUNNING[/td][td]bool[/td][td]false[/td][td]Whether passive reflection enables when running[/td][/tr]
[tr][td]PASSIVE_REFLECT_WHEN_DASHING[/td][td]bool[/td][td]false[/td][td]Whether passive reflection enables when dashing[/td][/tr]
[tr][td]AUTO_SCALE_MELEE_RANGE[/td][td]bool[/td][td]true[/td][td]Auto scale reflection ranges based on actual melee range (divided by 1.5)[/td][/tr]
[/table]
[h3]Group: Parameters[/h3]
[table]
    [tr]
        [th]Configuration Name[/th]
        [th]Type[/th]
        [th]Default Value[/th]
        [th]Description[/th]
    [/tr]
[tr][td]REFLECT_RANGE[/td][td]float[/td][td]2[/td][td]Active reflection trigger range[/td][/tr]
[tr][td]REFLECT_RANGE_PASSIVE[/td][td]float[/td][td]1.5f[/td][td]Passive reflection trigger range[/td][/tr]
[tr][td]TIME_PASSIVE_EXTEND[/td][td]float[/td][td]0.1f[/td][td]State duration extension per passive reflection (seconds)[/td][/tr]
[tr][td]TIME_ACTIVE_EXTEND[/td][td]float[/td][td]0.2f[/td][td]State duration extension per active reflection (seconds)[/td][/tr]
[tr][td]TIME_SWING_ACTIVE[/td][td]float[/td][td]0.3f[/td][td]Active reflection state duration after a melee swing (seconds)[/td][/tr]
[tr][td]TIME_ADS_ACTIVE[/td][td]float[/td][td]0.3f[/td][td]Active reflection state duration after entering ADS mode (seconds) (works only with "Enables passive during ADS")[/td][/tr]
[tr][td]CHANCE_BACK_ACTIVE[/td][td]float[/td][td]0.9f[/td][td]Chance for active reflection to return bullet to shooter[/td][/tr]
[tr][td]CHANCE_BACK_PASSIVE[/td][td]float[/td][td]0.05f[/td][td]Chance for passive reflection to return bullet to shooter[/td][/tr]
[tr][td]PASSIVE_STAMINA_COST[/td][td]float[/td][td]0.5f[/td][td]Passive reflection stamina cost rate (based on bullet damage)[/td][/tr]
[tr][td]ACTIVE_STAMINA_GAIN[/td][td]float[/td][td]5[/td][td]Stamina amount gain after each single active bullet reflection[/td][/tr]
[tr][td]DAMAGE_MULT_ACTIVE[/td][td]float[/td][td]1[/td][td]Reflected bullet damage multiplier after active reflection[/td][/tr]
[tr][td]DAMAGE_MULT_PASSIVE[/td][td]float[/td][td]0.5f[/td][td]Reflected bullet damage multiplier after passive reflection[/td][/tr]
[tr][td]DISTANCE_MULT_ACTIVE[/td][td]float[/td][td]5[/td][td]Reflected bullet range multiplier after active reflection[/td][/tr]
[tr][td]DISTANCE_MULT_PASSIVE[/td][td]float[/td][td]1[/td][td]Reflected bullet range multiplier after passive reflection[/td][/tr]
[/table]
[h3]Group: Grenade Reflection[/h3]
[table]
    [tr]
        [th]Configuration Name[/th]
        [th]Type[/th]
        [th]Default Value[/th]
        [th]Description[/th]
    [/tr]
[tr][td]ENABLE_GRENADE_REFLECT[/td][td]bool[/td][td]true[/td][td]Enables grenade reflection[/td][/tr]
[tr][td]AIM_GRENADE_OWNER[/td][td]bool[/td][td]true[/td][td]Aims grenade thrower (if not self) at reflection[/td][/tr]
[tr][td]GRENADE_REFLECT_HORIZONTAL_SPEED[/td][td]float[/td][td]10[/td][td]Grenade reflection horizontal speed[/td][/tr]
[tr][td]GRENADE_REFLECT_VERTICAL_SPEED[/td][td]float[/td][td]3[/td][td]Grenade reflection vertical speed[/td][/tr]
[/table]
[h3]Group: Misc[/h3]
[table]
    [tr]
        [th]Configuration Name[/th]
        [th]Type[/th]
        [th]Default Value[/th]
        [th]Description[/th]
    [/tr]
[tr][td]IGNORES_ANGLE[/td][td]bool[/td][td]false[/td][td]Also reflects bullets from behind; might solve the issue that some high-speed bullets go through the barrier[/td][/tr]
[tr][td]ACTIVE_CRITICAL[/td][td]bool[/td][td]true[/td][td]Whether actively reflected bullets are critical hits[/td][/tr]
[tr][td]ACTIVE_EXPLOSION[/td][td]bool[/td][td]false[/td][td]Whether actively reflected bullets explode[/td][/tr]
[tr][td]ACTIVE_EXPLOSION_DAMAGE_FACTOR[/td][td]float[/td][td]1[/td][td]Active reflection explosion extra damage multiplier (based on reflected bullet damage)[/td][/tr]
[tr][td]ACTIVE_EXPLOSION_RANGE[/td][td]float[/td][td]1[/td][td]Active reflection explosion range[/td][/tr]
[tr][td]ENABLES_FLYING_BLADE[/td][td]bool[/td][td]false[/td][td]Enables flying blade (?)[/td][/tr]
[tr][td]FLYING_BLADE_STRENGTH[/td][td]float[/td][td]0.5f[/td][td]Flying blade damage multiplier[/td][/tr]
[tr][td]FLYING_BLADE_VAMPIRISM[/td][td]float[/td][td]0.5f[/td][td]Damage HP absorbing ratio for flying blades[/td][/tr]
[/table]
[h3]Group: Sound[/h3]
[table]
    [tr]
        [th]Configuration Name[/th]
        [th]Type[/th]
        [th]Default Value[/th]
        [th]Description[/th]
    [/tr]
[tr][td]SFX_VOLUME[/td][td]float[/td][td]0.5f[/td][td]Reflection sound effect volume[/td][/tr]
[/table]
